(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{195:function(e,t,n){e.exports=n(372)},371:function(e,t,n){},372:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(8),o=n.n(i),l=n(28),s=n(29),u=n(35),c=n(34),d=n(36),m=n(373),p=n(10),f=n(47),h=n(30),v=n(192),b=n(144),g=n(117),y=n(68),E=n(15),O=n.n(E),w=n(23),S=function(e){return"".concat(e,"_FAIL")},I=n(139),j=new(function(){function e(){Object(l.a)(this,e),n(215).config();var t=I.initializeApp({apiKey:"AIzaSyDlDtFbX8KCeOMd9Pg-mFpoqFa9ViiWNeM",authDomain:"leaveplanner.firebaseapp.com",databaseURL:"https://leaveplanner.firebaseio.com",projectId:"leaveplanner",storageBucket:"leaveplanner.appspot.com",messagingSenderId:"1042272099252",appId:"1:1042272099252:web:bad8b09223fa71a0"});this.ref=t.database().ref(),this.auth=t.auth()}return Object(s.a)(e,[{key:"login",value:function(e,t){return this.auth.signInWithEmailAndPassword(e,t)}},{key:"logout",value:function(){return this.auth.signOut()}},{key:"loginWithGoogle",value:function(){return this.auth.signInWithPopup(new I.auth.GoogleAuthProvider)}},{key:"loginWithFacebook",value:function(){}},{key:"register",value:function(){var e=Object(w.a)(O.a.mark(function e(t,n,a,r){var i;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.createUserWithEmailAndPassword(a,r);case 2:return e.next=4,this.auth.currentUser.updateProfile({displayName:"".concat(t," ").concat(n)});case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=this;return new Promise(function(t){e.auth.onAuthStateChanged(t)})}}]),e}()),x=function(){return function(){var e=Object(w.a)(O.a.mark(function e(t){var n,a,r,i,o,l;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getCurrentUser();case 2:null===(n=e.sent)?t({type:"SIGN_OUT"}):(a=n.email,r=n.displayName,i=n.photoURL,o=n.uid,l=n.phoneNumber,t({type:"SIGN_IN",payload:{email:a,displayName:r,photoURL:i,uid:o,phoneNumber:l}}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},L=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={isSigningIn:!1,isSigningOut:!1},n.onSignInClick=Object(w.a)(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({isSigningIn:!0,isSigningOut:!1});case 2:setTimeout(function(){n.props.signInGoogle().then(function(){n.setState({isSigningIn:!1,isSigningOut:!1})})},1e3);case 3:case"end":return e.stop()}},e)})),n.onSignOutClick=Object(w.a)(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({isSigningIn:!1,isSigningOut:!0});case 2:setTimeout(function(){n.props.signOut().then(function(){n.setState({isSigningIn:!1,isSigningOut:!1})})},1e3);case 3:case"end":return e.stop()}},e)})),n.renderButtonText=function(){return n.state.isSigningOut||n.state.isSigningIn?r.a.createElement(p.a,{style:{fontSize:"1.2rem"},type:"loading"}):r.a.createElement("span",null,"Sign Out")},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({isSigningIn:!1,isSigningOut:!1})}},{key:"renderAuthButton",value:function(e){return null===this.props.isSignedIn?null:this.props.isSignedIn?r.a.createElement("button",{style:e,className:"ui google plus button",onClick:this.onSignOutClick},r.a.createElement("i",{className:"google plus icon"}),this.renderButtonText()):r.a.createElement("button",{style:e,className:"ui google plus button",onClick:this.onSignInClick},r.a.createElement("i",{className:"google plus icon"})," Sign In with Google")}},{key:"render",value:function(){return this.renderAuthButton(this.props.style)}}]),t}(a.Component),k=Object(h.b)(function(e){return{isSignedIn:e.auth.isSignedIn}},{signInGoogle:function(){return function(){var e=Object(w.a)(O.a.mark(function e(t){var n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.loginWithGoogle();case 2:n=e.sent,t({type:"SIGN_IN",payload:n.user});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},signOut:function(){return function(){var e=Object(w.a)(O.a.mark(function e(t){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.logout();case 2:t({type:"SIGN_OUT"});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(L),N=Object(y.e)(function(e){var t=m.a.Header,n=Object(a.useState)(!1),i=Object(v.a)(n,2),o=(i[0],i[1],b.b.SubMenu),l=r.a.createElement(b.b,null,r.a.createElement(b.b.Item,null,"1st menu item"),r.a.createElement(b.b.Item,null,"2nd menu item"),r.a.createElement(o,{title:"sub menu"},r.a.createElement(b.b.Item,null,"3rd menu item"),r.a.createElement(b.b.Item,null,"4th menu item")),r.a.createElement(o,{title:"disabled sub menu",disabled:!0},r.a.createElement(b.b.Item,null,"5d menu item"),r.a.createElement(b.b.Item,null,"6th menu item"))),s=e.style.visibility;return r.a.createElement(m.a,null,r.a.createElement(t,{className:"header",style:{height:"7vh"}},r.a.createElement("div",{className:"logo"}),r.a.createElement(g.a,{overlay:l},r.a.createElement(k,{style:{float:"right",marginTop:"1rem",width:"185px",visibility:s}}))))}),C=function(){var e=m.a.Sider;return r.a.createElement(e,{breakpoint:"lg",width:200,collapsedWidth:"0",style:{background:"#fff",height:"93vh",zIndex:"10"}},r.a.createElement(b.b,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],style:{height:"100%",borderRight:0}},r.a.createElement(b.b.Item,{key:"sub2"},r.a.createElement(f.b,{to:{pathname:"/leaveplanner/leavelogs"}},r.a.createElement("span",null,r.a.createElement(p.a,{type:"idcard"}),"Leave Logs")))))},D=n(41),M=n(374),F=function(e,t){return e<t?-1:e>t?1:0},T=function(e,t){return new Date(e)<new Date(t)?-1:new Date(e)>new Date(t)?1:0},_=[{text:"Vacation Leave",value:"Vacation Leave"},{text:"Sick Leave",value:"Sick Leave"},{text:"Holiday Leave",value:"Holiday Leave"},{text:"Emergency Leave",value:"Emergency Leave"},{text:"Maternity Leave",value:"Maternity Leave"},{text:"Business Trip",value:"Business Trip"},{text:"Training",value:"Training"}],A=[{text:"January",value:"January"},{text:"February",value:"February"},{text:"March",value:"March"},{text:"April",value:"April"},{text:"May",value:"May"},{text:"June",value:"June"},{text:"July",value:"July"},{text:"August",value:"August"},{text:"September",value:"September"},{text:"October",value:"October"},{text:"November",value:"November"},{text:"December",value:"December"}],U=[{text:"Male",value:"Male"},{text:"Female",value:"Female"},{text:"Bisexual",value:"Bisexual"},{text:"Transgender",value:"Transgender"},{text:"undefined",value:"undefined"}],R=[{title:"Leave Type",dataIndex:"leaveType",width:100,sorter:function(e,t){return F(e.leaveType,t.leaveType)},sortDirections:["descend","ascend"],filters:_,onFilter:function(e,t){return 0===t.leaveType.indexOf(e)}},{title:"Start Date",dataIndex:"startDate",width:100,sorter:function(e,t){return T(e.startDate,t.startDate)},sortDirections:["descend","ascend"],filters:A,onFilter:function(e,t){return 0===t.startDate.indexOf(e)}},{title:"End Date",dataIndex:"endDate",width:100,sorter:function(e,t){return T(e.endDate,t.endDate)},sortDirections:["descend","ascend"],filters:A,onFilter:function(e,t){return 0===t.endDate.indexOf(e)}},{title:"Date Submitted",width:100,dataIndex:"dateSubmitted",sorter:function(e,t){return T(e.dateSubmitted,t.dateSubmitted)},sortDirections:["descend","ascend"],filters:A,onFilter:function(e,t){return 0===t.dateSubmitted.indexOf(e)}}],G=[{title:"First Name",dataIndex:"firstName",width:100,sorter:function(e,t){return F(e.firstName,t.firstName)},sortDirections:["descend","ascend"]},{title:"Last Name",dataIndex:"lastName",width:100,sorter:function(e,t){return F(e.lastName,t.lastName)},sortDirections:["descend","ascend"],filters:_,onFilter:function(e,t){return 0===t.lastName.indexOf(e)}},{title:"Email",dataIndex:"email",width:100,sorter:function(e,t){return F(e.email,t.email)},sortDirections:["descend","ascend"],filters:_,onFilter:function(e,t){return 0===t.email.indexOf(e)}},{title:"Job Position",dataIndex:"jobPosition",width:100,sorter:function(e,t){return F(e.jobPosition,t.jobPosition)},sortDirections:["descend","ascend"],filters:_,onFilter:function(e,t){return 0===t.jobPosition.indexOf(e)}},{title:"Birthday",dataIndex:"birthday",width:100,sorter:function(e,t){return T(e.birthday,t.birthday)},sortDirections:["descend","ascend"],filters:A,onFilter:function(e,t){return 0===t.birthday.indexOf(e)}},{title:"Gender",dataIndex:"gender",width:100,sorter:function(e,t){return F(e.gender,t.gender)},sortDirections:["descend","ascend"],filters:U,onFilter:function(e,t){return 0===t.gender.indexOf(e)}}],P=function(e){return{title:"Action",key:"action",render:function(t){return r.a.createElement("div",null,r.a.createElement(p.a,{onClick:function(){return e.showModalInfo(t)},type:"info",style:{cursor:"pointer"}}),r.a.createElement(p.a,{onClick:function(){return e.showModalForm(!0)},type:"edit",style:{margin:"0px 2rem 0px 2rem",cursor:"pointer"}}),r.a.createElement(p.a,{type:"close",style:{cursor:"pointer"}}))},width:100}},V=n(22),J=n(375),W=n(377),B=n(92),z=n(33),q=n(115),H=n.n(q),K=n(376),Y=function(e){return r.a.createElement("div",null,r.a.createElement(K.a,e,e.renderForm()))},X=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).renderInput=function(e){var t,n=e.input,a=e.label,i=e.meta;return"birthday"===n.name?t=r.a.createElement(J.a,Object.assign({locale:H.a},n)):"firstName"===n.name||"lastName"===n.name||"email"===n.name||"jobPosition"===n.name?t=r.a.createElement(W.a,n):"gender"===n.name&&(t=r.a.createElement(B.a,Object.assign({},n,{style:{width:180}}),U.map(function(e){return r.a.createElement(B.a.Option,{key:e.value,value:e.value},e.value)}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,a),t,r.a.createElement("div",{style:{color:"red"}},i.touched&&i.error?i.error:""))},n.onSubmit=function(e){var t=new Date(e.birthday),a=new Date;t=n.formatDate(t),a=n.formatDate(a),n.props.newUser(Object(V.a)({},e,{birthday:t,dateSubmitteded:a})),n.props.handleCancel()},n.formatDate=function(e){var t=e.getDate(),n=e.getMonth(),a=e.getFullYear();return["January","February","March","April","May","June","July","August","September","October","November","December"][n]+" "+t+", "+a},n.renderForm=function(){return r.a.createElement(z.b,{onSubmit:n.onSubmit,initialValues:n.props.initialValues,render:function(e){var t=e.handleSubmit,a=(e.invalid,e.reset);return r.a.createElement("form",{onSubmit:function(){t(),a()},className:"ui form"},r.a.createElement(z.a,{name:"firstName",component:n.renderInput,label:"First Name",validate:Q}),r.a.createElement(z.a,{name:"lastName",component:n.renderInput,label:"Last Name",validate:Z}),r.a.createElement(z.a,{name:"email",component:n.renderInput,label:"Email",validate:$}),r.a.createElement(z.a,{name:"jobPosition",component:n.renderInput,label:"Job Position",validate:ee}),r.a.createElement(z.a,{name:"birthday",component:n.renderInput,label:"Birthday",validate:te}),r.a.createElement(z.a,{name:"gender",component:n.renderInput,label:"Gender"}),r.a.createElement("button",{style:{marginTop:"1rem"},className:"ui button primary",type:"submit"},"Submit"))}})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e={destroyOnClose:!0,title:this.props.isEdit?"Edit User":"Create User",visible:this.props.visible,onCancel:this.props.handleCancel,centered:!0,footer:[null,null],renderForm:this.renderForm};return r.a.createElement("div",null,r.a.createElement(Y,e))}}]),t}(a.Component),Q=function(e){if(!e)return"First name is required"},Z=function(e){if(!e)return"Last name is required"},$=function(e){if(!e)return"Email is required"},ee=function(e){if(!e)return"Job Position is required"},te=function(e){if(!e)return"Gender is required"},ne=Object(h.b)(function(e){return{state:e}},{createUser:function(e){return function(){var e=Object(w.a)(O.a.mark(function e(t,n){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n().auth.userId,t({type:"CREATE_USER",payload:"".data});case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}})(X),ae=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={showModalForm:!1,showModalInfo:!1,showModalInfoId:null,isEdit:!1,disableCreate:!0,sortedInfo:null},n.showModalForm=function(e){n.setState({showModalForm:!0,isEdit:e})},n.showModalInfo=function(e){n.setState({showModalInfo:!0,showModalInfoId:e.id})},n.onClickCancelModal=function(){n.setState({showModalForm:!1,showModalInfo:!1,showModalInfoId:null})},n.columns=[],n.columns=G,n.columns.length<7&&n.columns.push(P({showModalInfo:n.showModalInfo,showModalForm:n.showModalForm})),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchUsers(),setTimeout(function(){e.setState({disableCreate:!1})},1e3)}},{key:"render",value:function(){var e=this;if(this.state.disableCreate)return r.a.createElement("div",{style:{width:"100%",height:"100%",margin:"auto"}},r.a.createElement(p.a,{style:{position:"absolute",top:"50%",left:"55%",fontSize:"3rem"},width:"1000px",type:"loading"}));var t=this.state.sortedInfo;return t=t||{},r.a.createElement("div",null,r.a.createElement(D.a,{onClick:function(){return e.showModalForm(!1)},type:"primary",style:{zIndex:"10",position:"relative",top:"5vh",float:"bottom"}},"New User"),r.a.createElement(M.a,{size:"small",pagination:{position:"both"},bordered:!0,columns:this.columns,dataSource:this.props.users.users}),r.a.createElement(ne,{visible:this.state.showModalForm,handleCancel:this.onClickCancelModal,isEdit:this.state.isEdit,onSubmit:this.onSubmit}))}}]),t}(r.a.Component),re=Object(h.b)(function(e){return{users:e.users}},{fetchUsers:function(){return function(){var e=Object(w.a)(O.a.mark(function e(t){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"FETCH_USERS",payload:"".data});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(ae),ie=n(42),oe=Object(ie.a)(),le=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).renderInput=function(e){var t,n=e.input,a=e.label,i=e.meta;return"startDate"===n.name||"endDate"===n.name?t=r.a.createElement(J.a,Object.assign({locale:H.a},n)):"leaveType"===n.name?t=r.a.createElement(B.a,Object.assign({},n,{style:{width:180}}),_.map(function(e){return r.a.createElement(B.a.Option,{key:e.value,value:e.value},e.value)})):"remarks"===n.name&&(t=r.a.createElement(W.a.TextArea,Object.assign({},n,{autosize:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,a),t,r.a.createElement("div",{style:{color:"red"}},i.touched&&i.error?i.error:""))},n.onSubmit=function(e){var t=new Date(e.startDate),a=new Date(e.endDate),r=new Date;t=n.formatDate(t),a=n.formatDate(a),r=n.formatDate(r),n.props.newLeaveLog(Object(V.a)({},e,{startDate:t,endDate:a,dateSubmitted:r})),n.props.handleCancel()},n.formatDate=function(e){var t=e.getDate(),n=e.getMonth(),a=e.getFullYear();return["January","February","March","April","May","June","July","August","September","October","November","December"][n]+" "+t+", "+a},n.renderForm=function(){return r.a.createElement(z.b,{onSubmit:n.onSubmit,initialValues:n.props.initialValues,render:function(e){var t=e.handleSubmit;e.invalid,e.reset;return r.a.createElement("form",{onSubmit:t,className:"ui form"},r.a.createElement(z.a,{name:"startDate",component:n.renderInput,label:"Start date",validate:se}),r.a.createElement(z.a,{name:"endDate",component:n.renderInput,label:"End date",validate:se}),r.a.createElement(z.a,{name:"leaveType",component:n.renderInput,label:"Leave type",validate:ue}),r.a.createElement(z.a,{name:"remarks",component:n.renderInput,label:"Remarks"}),r.a.createElement("button",{style:{marginTop:"1rem"},className:"ui button primary",type:"submit"},"Submit"))}})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e={destroyOnClose:!0,title:this.props.isEdit?"Edit Leave Log":"Create Leave Log",visible:this.props.visible,onCancel:this.props.handleCancel,centered:!0,footer:[null,null],renderForm:this.renderForm};return r.a.createElement("div",null,r.a.createElement(Y,e))}}]),t}(a.Component),se=function(e){if(!e)return"Dates are required"},ue=function(e){if(!e)return"Leave type is required"},ce=Object(h.b)(function(e){return{state:e}},{newLeaveLog:function(e){return function(){var t=Object(w.a)(O.a.mark(function t(n,a){var r,i,o;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.user.uid,i=j.ref.child("".concat(r,"/leaves")),t.next=4,i.push().set(Object(V.a)({},e,{uid:r})).then(function(){return{data:Object(V.a)({},e,{uid:r})}}).catch(function(e){return{data:e}});case 4:o=t.sent,n({type:"NEW_LEAVE_LOG",payload:o.data}),oe.push("/leaveplanner/leavelogs");case 7:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}})(le),de=n(378),me=n(379),pe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).renderLeaveDetails=function(){return n.props.selectedLeaveLog?r.a.createElement("div",{width:"100%"},r.a.createElement(de.a,{gutter:8,style:{marginBottom:"1rem"}},r.a.createElement(me.a,{span:6,style:{fontWeight:"bold"}},"ID:"),r.a.createElement(me.a,{span:6},n.props.selectedLeaveLog.id)),r.a.createElement(de.a,{gutter:8,style:{marginBottom:"1rem"}},r.a.createElement(me.a,{span:6,style:{fontWeight:"bold"}},"Leave Type:"),r.a.createElement(me.a,{span:6},n.props.selectedLeaveLog.leaveType)),r.a.createElement(de.a,{gutter:16,style:{marginBottom:"1rem"}},r.a.createElement(me.a,{span:6,style:{fontWeight:"bold"}},"Start Date:"),r.a.createElement(me.a,{span:6},n.props.selectedLeaveLog.startDate),r.a.createElement(me.a,{span:6,style:{fontWeight:"bold"}},"End Date:"),r.a.createElement(me.a,{span:6},n.props.selectedLeaveLog.endDate)),r.a.createElement(de.a,{gutter:16,style:{marginBottom:"1rem"}},r.a.createElement(me.a,{span:6,style:{fontWeight:"bold"}},"Date Submitted:"),r.a.createElement(me.a,{span:6},n.props.selectedLeaveLog.dateSubmitted)),r.a.createElement(de.a,{gutter:16},r.a.createElement(me.a,{span:6,style:{fontWeight:"bold"}},"Remarks:"),r.a.createElement(me.a,{span:18},n.props.selectedLeaveLog.remarks))):r.a.createElement("div",null,"Loading...")},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.leaveId!==e.leaveId&&this.props.fetchLeaveLog(this.props.leaveId)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(K.a,{destroyOnClose:!0,title:"Leave Details",visible:this.props.visible,onCancel:this.props.handleCancel,centered:!0,footer:[null,null],width:"50vw"},this.renderLeaveDetails()))}}]),t}(a.Component),fe=Object(h.b)(function(e){return{selectedLeaveLog:e.leaveLogs.selectedLeaveLog}},{fetchLeaveLog:function(e){return function(){var t=Object(w.a)(O.a.mark(function t(n,a){var r,i;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.user.uid,i=j.ref.child("".concat(r,"/leaves/").concat(e)),t.next=4,i.once("value",function(t){var a=t.val();n({type:"FETCH_LEAVE_LOG",payload:Object(V.a)({},a,{id:e})})},function(e){n({type:"FETCH_LEAVE_LOG_FAIL",payload:e})});case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}})(pe),he=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={showModalForm:!1,showModalInfo:!1,showModalInfoId:null,isEdit:!1,disableCreate:!0,sortedInfo:null},n.showModalForm=function(e){n.setState({showModalForm:!0,isEdit:e})},n.showModalInfo=function(e){n.setState({showModalInfo:!0,showModalInfoId:e.id})},n.onClickCancelModal=function(){n.setState({showModalForm:!1,showModalInfo:!1,showModalInfoId:null})},n.columns=[],n.columns=R,n.columns.length<5&&n.columns.push(P({showModalInfo:n.showModalInfo,showModalForm:n.showModalForm})),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchLeaveLogs(),setTimeout(function(){e.setState({disableCreate:!1})},1e3)}},{key:"render",value:function(){var e=this;if(this.state.disableCreate)return r.a.createElement("div",{style:{width:"100%",height:"100%",margin:"auto"}},r.a.createElement(p.a,{style:{position:"absolute",top:"50%",left:"55%",fontSize:"3rem"},width:"1000px",type:"loading"}));var t=this.state.sortedInfo;return t=t||{},r.a.createElement("div",null,r.a.createElement(D.a,{onClick:function(){return e.showModalForm(!1)},type:"primary",style:{zIndex:"10",position:"relative",top:"-1vh",float:"bottom"}},"New Log"),r.a.createElement(M.a,{size:"small",pagination:{position:"both"},bordered:!0,columns:this.columns,dataSource:this.props.leaveLogs.leaveLogs}),r.a.createElement(ce,{visible:this.state.showModalForm,handleCancel:this.onClickCancelModal,isEdit:this.state.isEdit,onSubmit:this.onSubmit}),r.a.createElement(fe,{leaveId:this.state.showModalInfoId,visible:this.state.showModalInfo,handleCancel:this.onClickCancelModal}))}}]),t}(r.a.Component),ve=Object(h.b)(function(e){return{leaveLogs:e.leaveLogs,auth:e.auth,state:e}},{fetchLeaveLogs:function(){return function(){var e=Object(w.a)(O.a.mark(function e(t,n){var a,r;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().auth.user.uid,r=j.ref.child("".concat(a,"/leaves")),e.next=4,r.once("value",function(e){var n=e.val();n=n?Object.keys(n).map(function(t){var n=e.val()[t];return Object(V.a)({id:t},n)}):null,t({type:"FETCH_LEAVE_LOGS",payload:n})},function(e){t({type:"FETCH_LEAVE_LOGS_FAIL",payload:e})});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}})(he),be=function(){return r.a.createElement("div",null,"Statistics")},ge=function(){return r.a.createElement("div",null,"Calendar")},ye=function(){var e=m.a.Content;return r.a.createElement(m.a,{style:{padding:"16px 24px 24px",zIndex:"1"}},r.a.createElement(e,{style:{background:"#fff",padding:24,margin:0,minHeight:280,maxHeight:"100vh"}},r.a.createElement(y.c,null,r.a.createElement(y.a,{path:"/leaveplanner/calendar",exact:!0,component:ge}),r.a.createElement(y.a,{path:"/leaveplanner/leavelogs",exact:!0,component:ve}),r.a.createElement(y.a,{path:"/leaveplanner/statistics",exact:!0,component:be}),r.a.createElement(y.a,{path:"/leaveplanner/people",exact:!0,component:re}))))},Ee=n(191),Oe=function(e){var t,n=e.input,a=e.label,i=e.meta;return"email"===n.name?t=r.a.createElement(W.a,Object.assign({placeholder:"Email",suffix:r.a.createElement(Ee.a,{title:"Extra information"},r.a.createElement(p.a,{type:"info-circle",style:{color:"rgba(0,0,0,.45)"}}))},n)):"password"===n.name?t=r.a.createElement(W.a.Password,Object.assign({},n,{placeholder:"Password"})):"first_name"===n.name?t=r.a.createElement(W.a,Object.assign({placeholder:"First Name",suffix:r.a.createElement(Ee.a,{title:"Extra information"},r.a.createElement(p.a,{type:"info-circle",style:{color:"rgba(0,0,0,.45)"}}))},n)):"last_name"===n.name&&(t=r.a.createElement(W.a,Object.assign({placeholder:"Last Name",suffix:r.a.createElement(Ee.a,{title:"Extra information"},r.a.createElement(p.a,{type:"info-circle",style:{color:"rgba(0,0,0,.45)"}}))},n))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{style:{color:"white"}},a),t,r.a.createElement("div",{style:{color:"red"}},i.touched&&i.error?i.error:""))},we=function(e){var t,n,a,i=e.fields,o=e.error;return r.a.createElement("div",null,function(e){if(e)return r.a.createElement("div",{style:{color:"red"}},e.message)}(o),r.a.createElement(z.b,{onSubmit:e.onSubmit,initialValues:e.initialValues,render:function(t){var n,a,o=t.handleSubmit;t.invalid,t.reset;return r.a.createElement("form",{onSubmit:o,className:"ui form"},i.map(function(e){return r.a.createElement(z.a,{name:e.name,component:Oe,label:e.label,validate:e.validation})}),r.a.createElement("button",{style:{marginTop:"1rem",width:"100%"},className:"ui button primary",type:"submit"},(n=e.loading,a=e.type,n?r.a.createElement(p.a,{type:"loading"}):r.a.createElement("span",null,a))))}}),(t=e.checkAuth,n=e.type,a=e.history,"Register"!==n?r.a.createElement("div",null,r.a.createElement(f.b,{to:"/leaveplanner/register"},r.a.createElement("button",{style:{marginTop:"1rem",width:"100%",backgroundColor:"green"},className:"ui button primary"},"Register")),r.a.createElement(k,{style:{marginTop:"1rem",width:"100%"}})):r.a.createElement("div",null,r.a.createElement("button",{style:{marginTop:"1rem",width:"100%",backgroundColor:"green"},className:"ui button primary",onClick:function(){t(),a.push("/leaveplanner")}},"Cancel"))))},Se=function(e){return r.a.createElement("div",{style:{width:"35rem",backgroundColor:"rgb(0,21,41, 0.85)",padding:"4rem",position:"relative",top:"50%",left:"50%",transform:"translate(-50%,-70%)",borderRadius:"0.9rem",boxShadow:"0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23)"}},we(e))},Ie=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={isSigningIn:!1,isSigningOut:!1},n.onSubmitLogin=function(){var e=Object(w.a)(O.a.mark(function e(t){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({isSigningIn:!0});case 2:setTimeout(function(){n.props.signIn(t)},1e3);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.onSubmitRegister=function(){var e=Object(w.a)(O.a.mark(function e(t){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({isSigningIn:!0});case 2:setTimeout(function(){n.props.registerUser(t)},1e3);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.validation=function(){return{validateFirstName:function(e){if(!e)return"First name is required"},validateLastName:function(e){if(!e)return"Last name is required"},validateEmail:function(e){if(!e)return"Email is required"},validatePassword:function(e){if(!e)return"Password is required"}}},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({isSigningIn:!1}),this.props.history.push("/leaveplanner")}},{key:"render",value:function(){var e=this.validation(),t=e.validateFirstName,n=e.validateLastName,a=e.validateEmail,i=e.validatePassword,o={loading:this.state.isSigningIn,error:this.props.auth.error,onSubmit:this.onSubmitLogin,initialValues:[],type:"Sign In",fields:[{name:"email",label:"Email",validation:a},{name:"password",label:"Password",validation:i}]},l={loading:this.state.isSigningIn,checkAuth:this.props.checkAuth,error:this.props.auth.error,onSubmit:this.onSubmitRegister,initialValues:[],type:"Register",fields:[{name:"first_name",label:"First Name",validation:t},{name:"last_name",label:"Last Name",validation:n},{name:"email",label:"Email",validation:a},{name:"password",label:"Password",validation:i}]};return r.a.createElement("div",{style:{height:"93vh"}},r.a.createElement(y.c,null,r.a.createElement(y.a,{path:"/leaveplanner",exact:!0,render:function(e){return r.a.createElement(Se,Object.assign({},e,o))}}),r.a.createElement(y.a,{path:"/leaveplanner/register",exact:!0,render:function(e){return r.a.createElement(Se,Object.assign({},e,l))}})))}}]),t}(a.Component),je=Object(y.e)(Object(h.b)(function(e){return{auth:e.auth}},{registerUser:function(e){return function(){var t=Object(w.a)(O.a.mark(function t(n,a){var r,i,o,l;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.first_name,i=e.last_name,o=e.email,l=e.password,j.register(r,i,o,l).then(function(){var e=Object(w.a)(O.a.mark(function e(t){var a,r,i,o,l,s;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getCurrentUser();case 2:a=e.sent,r=a.email,i=a.displayName,o=a.photoURL,l=a.uid,s=a.phoneNumber,n({type:"REGISTER_USER",payload:{email:r,displayName:i,photoURL:o,uid:l,phoneNumber:s}});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e){n({type:S("REGISTER_USER"),payload:e})});case 2:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},signIn:function(e){return function(){var t=Object(w.a)(O.a.mark(function t(n){var a,r;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.email,r=e.password,j.login(a,r).then(function(){var e=Object(w.a)(O.a.mark(function e(t){var a,r,i,o,l,s;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getCurrentUser();case 2:a=e.sent,r=a.email,i=a.displayName,o=a.photoURL,l=a.uid,s=a.phoneNumber,n({type:"SIGN_IN",payload:{email:r,displayName:i,photoURL:o,uid:l,phoneNumber:s}});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(e){n({type:S("SIGN_IN"),payload:e})});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},checkAuth:x})(Ie)),xe=(n(371),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.checkAuth()}},{key:"render",value:function(){return null===this.props.auth.isSignedIn?r.a.createElement(f.a,null,r.a.createElement("div",null,r.a.createElement(N,{style:{visibility:"hidden"}}),r.a.createElement(m.a,null,r.a.createElement("div",{style:{width:"100%",height:"100%",margin:"auto"}},r.a.createElement(p.a,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"3rem"},width:"1000px",type:"loading"}))))):this.props.auth.isSignedIn?r.a.createElement(f.a,null,r.a.createElement("div",null,r.a.createElement(N,{style:{visibility:"visible"}}),r.a.createElement(m.a,null,r.a.createElement(C,null),r.a.createElement(ye,null)))):r.a.createElement(f.a,null,r.a.createElement("div",null,r.a.createElement(N,{style:{visibility:"hidden"}}),r.a.createElement(m.a,null,r.a.createElement(je,null))))}}]),t}(a.Component)),Le=Object(h.b)(function(e){return{auth:e.auth}},{checkAuth:x})(xe),ke=n(60),Ne=n(145),Ce=(n(177),{leaveLogs:[],selectedLeaveLog:null}),De={isSignedIn:null,user:null,error:null},Me=Object(ke.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER_USER":case"SIGN_IN":return Object(V.a)({},e,{isSignedIn:!0,user:Object(V.a)({},t.payload),error:null});case"SIGN_OUT":return Object(V.a)({},e,{isSignedIn:!1,user:null,error:null});case S("REGISTER_USER")||S("SIGN_IN"):return Object(V.a)({},e,{error:Object(V.a)({},t.payload)});default:return e}},leaveLogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_LEAVE_LOGS":return null===t.payload?Object(V.a)({},e):Object(V.a)({},e,{leaveLogs:Object(Ne.a)(t.payload)});case"FETCH_LEAVE_LOG":return Object(V.a)({},e,{selectedLeaveLog:t.payload});case"NEW_LEAVE_LOG":return Object(V.a)({},e,{leaveLogs:[].concat(Object(Ne.a)(e.leaveLogs),[t.payload])});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USERS":return Object(V.a)({},e,{users:t.payload});default:return e}}}),Fe=function(e,t){return"SIGN_OUT"===t.type&&(e=void 0),Me(e,t)},Te=n(190),_e=ke.d,Ae=Object(ke.e)(Fe,_e(Object(ke.a)(Te.a)));o.a.render(r.a.createElement(h.a,{store:Ae},r.a.createElement(Le,{style:{fontSize:"1.6rem"}})),document.querySelector("#root"))}},[[195,1,2]]]);
//# sourceMappingURL=main.0ece628f.chunk.js.map